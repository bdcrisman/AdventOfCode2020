using System;
using System.Collections.Generic;
using System.Linq;

namespace Day3
{
    class Program
    {
        static readonly string PuzzleInput = @"
            .##.............##......#.....#
            .#.#................#..........
            ...#..#.##..#.#......#.#.#.#..#
            ..#......#........#..#..#.#.#..
            .......#....#..#..#.......#....
            ..#..#..##.#...#........#.###..
            ..#...#..#.....#.##....#.......
            ....#..###.#......#.##..#...##.
            ..#..........#.##.#...#........
            #...#............##....#..##...
            .......##....#.....##..#.#..#.#
            ..#..#..#...#....#....#....#...
            .#...#.##........#####........#
            ..#..#......#.....##...#.......
            ....#......##....#.#....#.#..##
            #.#.##....##..#.........#.###..
            ##..###..#..#.......###.......#
            ...#.#......#.........#....#...
            .....#..........#.....##..#.#..
            ....##......#.#..#....#.#......
            ..#.....#..##.......##......#..
            .........##.##.#..##...........
            ....#...#.....#....#.#.###....#
            .##.#..#...##..#.......#......#
            ##..#..#..####..#.#..#...#.....
            ..###..#..#..#.###..#....#.##..
            ......#...###.#.#.....#........
            .....#...#.#...#.......#.....#.
            #........#..##...........#..#..
            .#.##.##...#.....#.#....#..#...
            ..##.##....#.....#....#....##..
            #.........##...##..#.....#..#..
            ........#.####....#...##.....#.
            .#.#...#..#..#.#......##.....#.
            ..#..........##..#.#.#....#...#
            #.......#...#...#.....#.##.#...
            ..#.....#..#.....####.#..#.#.##
            ...#.#..#...#.....#...#.#.#.#.#
            .#..##....##.....#..#....###...
            ....#......##.#.#.....#......#.
            ..#.#...#......#.....##.......#
            ..#...###...#..#.#...#..#.....#
            #..............#.....#....##..#
            .#...#.......#.............#...
            ..###....#.##........#.#.......
            #.##.......#..#............###.
            #...#..##.#.#............######
            ..##..#....#.#.###...#..##.##..
            .#...#.###.#....#...#....#...#.
            #...#.......#...........#...##.
            ##.#......#####.............#..
            ....#..#......##..#..........#.
            #.....#.....#.#.......#...#...#
            ....#...#.#..##........#.#..##.
            ..##.....##............#.#.###.
            #.........#........#..###......
            ............#..................
            .#.###...####...#.#..#......#..
            ...##.###.#....##.#..####..#.##
            ..#####.#.##...#.#...##.##....#
            ........##...#...#....##.....##
            #...........###...#.#...##.#...
            ##......#...#.......###........
            ..#..#.##.#..###....#..#.###.#.
            ...#.#.#...#....#.##..#...#....
            ........#.##...##.#.....##...##
            .#..........##..#..#..#.#...#..
            #.#...#.##.#....#.##..#........
            .#.#.#....##..##.####.....###..
            ..#....##....#..#..#..##.......
            ..##...#.......#...##.#....#...
            ...####.#.#...........#.#...#..
            ....####.....#.#.....#....##.##
            ..#.....#.#.............##....#
            #.#....#####.##..####.#...#.#..
            #.#....#.##.#.#.##..#.#...#....
            ......#.......#.......#.....#..
            ..#.....#....###.###..#..#..#..
            #..#....##.###...##.....#......
            ..#..#...#..#.##..........#....
            ...#.#.#......#....#.##..#..##.
            ....##.#....#..#...##....###...
            ##.#.###.....#..#.#.#..#.....##
            ##..#.#........#...#..#.#......
            ....#.#.......##.#...........#.
            .......##...#...#...#.....#....
            .....#....#..#..###.#...#......
            ............#.#..#......#.#....
            ...##..#.##....##..##.#......#.
            #.#.#......#.#.....#.#.#..#.#.#
            ...###..........#..#..#.##.....
            ......#......#......###..##....
            #...##...#....#....#..#...#.#..
            .......#..#......##.......#....
            ...#..#..#.....#.....#......##.
            ..#....###..........##..#...#..
            ..........#..#.#...#......#..#.
            #...#....#.##.........#.#.#...#
            .#.#.#...#.#...#.#..#..#....#.#
            #.##....#..#.........#.##.##..#
            ..#.#..##.#....#.###.#...#....#
            .#.......#...#.#.........#....#
            .......#...#..........#.#..#...
            ...#.....##..#....#...###...#.#
            #....##.##..........#.......#..
            .##..##......#...#....#.##....#
            ....#.....##...##.#..#.........
            ...#.#..##.#.#..#.......#....#.
            .#...#.#.#.#..#..#.##.......#..
            ..#..##...#.#..#.......#.#####.
            .......#.#...........#....#.#..
            .#.###..........#...#..#...#...
            ..#.#............##......##....
            ...##..#...###...##....#.#.##..
            ....#.##...#..#.#.#...........#
            ....#..#....##.....#.##.#.....#
            ..##......##.#.........#....#.#
            ###...#...#..#.#...#...........
            .####.....#.....#.#....#..#....
            .#....#..#..#..#...##.....###.#
            #....##.#....#.##..#......##..#
            .........#..#.#.....#.#....##.#
            .....#.#...#....#.#...#....#..#
            .#...#.#.....#.#......#.#......
            #....##.......#.............#..
            #..#...#........##..#..#......#
            ####..##.#..##..#.........####.
            .#.##..#.#..#.#.#.##...#..#.#.#
            .##.#..#............#......#...
            ###....#.##....#..#...#........
            .....#..###..........#..#......
            .##..##.....#..##....#...#.....
            #...##...........#..#...###..#.
            #..##....#...#.##.##....#......
            ...#...#..#.#.......##.......##
            ....#.....#..#...#.........#.#.
            .#...##.#......#.#..#..#...##..
            ...##...##.##...##...#..#......
            #..##.#..#..#............#...#.
            ..#.....#.........#........#.#.
            #.#...#...#......#.#......#....
            .##.....##.#.#....#.##...##.#..
            .##..##.#.#....#.##............
            .#.##.....##.#...#...###....#..
            .#..............#.#....###.###.
            ....#..#...#.#.#..........#.#.#
            .#.#..#.#.#...###..#...##......
            .#.#.....###......#..........#.
            ........#.##...............#.#.
            ...#.#.#......#..#..##........#
            ..#.##......#.......#..#......#
            ...#...#...#...#..#..#........#
            ..#....#.....#....#..##........
            .....#..#...##....#......##....
            ...##..##..#..........##....#.#
            ..#....#..#...#.##..#.....##...
            ###...#.#....#........#.......#
            ......#...#..#....###.........#
            ..###.#...#...#...#.#..###.#...
            .##.#.......#.#..#..#......#.#.
            ...##...........#.#..#.#..#....
            .......#.....####.#.....#...#.#
            ......##......##.#.#.#...#.#..#
            ..###.#####..#....#.#...#..##..
            .....#..#......#........#......
            #..##....#.#.##....#....#......
            .#....#.##.####.##..#..#......#
            #...##...#.#...##.#.##.##...#..
            ........#.#........#.#...#..#..
            .#....###..#......#.##.###..#..
            .#..#..#..#..#...#.#.........##
            ....#...#..#..............#....
            ........#...##.....#.......#...
            ..#......#.#..#.#..#.#.#...###.
            ....#...####....###....#......#
            #...#.#...................#.##.
            ..#.#.###...#....##....##......
            #..##..#.........#....#....####
            .#....###...#.#...#......#...#.
            ......#..#.#..#.##...#.#.#..#..
            .#...#.#.....#..##......#..#...
            ##.#..##.....##.#.#.......##...
            .##.##.##..#...#.#.##.##.......
            .#.#......#.....#...#.#..#.....
            ...#...........#..#.##..##..#..
            .....#...##......#........#.#..
            ....#..............##.........#
            ..####.#....##..##......##.#.#.
            .#.#..#...#..........#...###..#
            ....#.#.##.....###.#..#.##.....
            .......##.#.#..#...#...##.#....
            ...#.##.....#....#...#...#.....
            ##.#.##..#..#.#.....#.#..#.....
            ..#..##........#....###..#..#..
            ..#.........##.....#......#...#
            ...##..........##......#.#.#...
            #.....#..#..#......#......#....
            .##...#..##....#.......##..#.#.
            .#...##...##......####.##.#....
            .....#.........#.#.####......#.
            ...#.....#.#.........##..#.....
            ##.#.###.#..#.#..#............#
            ...##..#.#....#....#..#........
            ..#.###......#...#.#.....#...#.
            ....##.##..#.....#...#.#.#....#
            .......#.#..#...........#.#....
            .#.#..##.#.......#.#..#.....###
            ...#.#.....#.#..#.##..#...#.#..
            ...#......##....#..............
            ......#...#....................
            ..#........#...##.##.#..#.#.#..
            .#.###.#.##..##..#....##....#..
            .....#..#.#...#.#..#..#.......#
            ..........#.##.#..##..####.....
            ............#.#......#.........
            .#....#..#......#.....##.......
            .....#........#.....##.#..#.#..
            #..#.##...#.#.....#...#.####...
            ......#...#....#.##..##.#...#..
            .#.#.##......##....#.#....#.##.
            #.#.#....#.###....##....##.....
            .##..#...#.##......#..#..#...##
            ...#....###....#...........#.#.
            #.#.##.##...##....#....##.#...#
            .#.#######.......#......#......
            #......#...#.#.#.###....#.##..#
            ......##..#..##.........##.#.##
            ....##...#.#....##.....#.....#.
            ..#.#........##........#.#..##.
            .....#..#.##.....#.....#..#.#..
            .#..............#.......#......
            .............#..#..........#...
            .#..#.##....##.#..#...##.......
            ...........#..#.......#.#....#.
            .#..#..........##...#.#.#...#..
            ......#....#..###....#......#..
            .#...#...##..#..#..##..#..#.#..
            #.#.........#....#..........##.
            ...##..#..##...#....##...##.##.
            ..#....#.####.........#.....##.
            .....#.#...#.#...#.##.#...##..#
            #...#.....#..#.......#...#..#..
            ..#.......#..##.#.....#....#...
            .#.....#..##.#.....#...#.#...#.
            .....#.##..........##....#...#.
            ...#....#...#........##...#...#
            ....##...#....#..........#.....
            ...#....##..#..####..##.#...#.#
            #...###.###..#....##.#.........
            .#.......#......#.........#....
            ..#..##..#.........##..........
            #......#.#.##...#...#####......
            ......#.....####......#....#...
            .........#..#..#...#....#.#....
            ....#........#...##....#.......
            ...##.#...#..........#....#....
            ........#.......#.##..#..#...#.
            ....#..##...........#.....#..#.
            #....#...............#.#....#..
            .#........#....#.#...#.......#.
            #.......##..........#.......#..
            ...#....#...##.#..#.......#....
            #..#.##...#.#...#...#...#....#.
            ###...#...#....#....#....#...#.
            ##......#.#.......#....#..#....
            ......#......#....#.#.#..###..#
            .#.#.##.....#..#..........#....
            ##...#.#.#..##....#.....#.#....
            #.##...#...#.#...####..#.......
            .....##..#.#.#....#..##..#.#...
            ....###.#.........##.....#.....
            ......##...........#........#.#
            .#.........##..................
            .........##...#.............#.#
            ......##...#...#.........#..##.
            #..#.......#..##.......###.....
            ....#.#.....#............##....
            .....#..#......#....#.....##...
            ##......##...................#.
            #....#............#.#.###.##...
            .#.....#........#.....#...#....
            ......##.......######......##..
            .#....##....#..###....#.......#
            ..............##.#..#.......#.#
            .#..#..........#..#.##.........
            ......##.#..#......#.#....##.#.
            #.....#.##...#.....#...#..#...#
            .#....#..##.....#.....#.#.#....
            ..#......#.##..#.........#.#.#.
            .#..##...#...#.....#..#..#.#..#
            #.#.##.##.................#.#.#
            .#..#.#..##.#.......#.......##.
            #...#...#..##...#...##...#...#.
            ....#......#..#...#.....##..#..
            ..............##......#...#.#..
            ..##..#.......#..#..###.#.#....
            .#..#..#...#.......#...#...##.#
            .#...#.......###..#.##.###.....
            ##.#...#......#.....#..#.......
            ##....##............#.....#..#.
            .....#...##......##.....#....##
            #...##..#....#..##....###.#...#
            .....#..#.#.....#.##..##....#..
            .#.....#.#........#...#.#......
            ......#....#.#........#.#......
            .##..#...............###...##.#
            .......###.#.#......###.....#..
            .......#..##...#....#.##..#.##.
            ..#.......##.......#.....#....#
            .#......#....#..##..#.#.#..##..
            ###......#...#..#.............#
            .#....#..#.#......##...........
            .#....#.##.....#..#.......#..##
            ....#...#...#..#.....#..##..#.#
            #.#.#.......##.#..#.#....#.....
            ##.#.......#...#...#.#......##.
            #....#.#...........#######.....
            ...#.#.##.#......##..###.......
            ..#.#....#..#.................#
            ........#..##..#.....#....#.##.
            ...#.#..#..#..#..............##
            .##.......###.#......#....#..##
            ..##.##.#......#....#..#...#..#
        ";
        static readonly string TestInput = @"
            ..##.........##.........##.........##.........##.........##.......
            #...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..
            .#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.
            ..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#
            .#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.
            ..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....
            .#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#
            .#........#.#........#.#........#.#........#.#........#.#........#
            #.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...
            #...##....##...##....##...##....##...##....##...##....##...##....#
            .#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#
            ";


        static void Main(string[] args)
        {
            var treeCount = new PartOne().CountTreesUsingSlopeRightThreeDownOne(PuzzleInput);
            Console.WriteLine($"Number of trees encountered in part 1: {treeCount}");

            var counts = new List<long>
            {
                new PartTwo().CountTreesUsingSlope(PuzzleInput, 1, 1),
                new PartTwo().CountTreesUsingSlope(PuzzleInput, 3, 1),
                new PartTwo().CountTreesUsingSlope(PuzzleInput, 5, 1),
                new PartTwo().CountTreesUsingSlope(PuzzleInput, 7, 1),
                new PartTwo().CountTreesUsingSlope(PuzzleInput, 1, 2)
            };

            long product = counts.Aggregate(1L, (x, y) => x * y);            
            Console.WriteLine($"Number of trees encountered in part 2: {product}");
        }
    }
}
